<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>GPT-Desk</title>
	<link rel="icon" th:href="@{img/logo.png}">
	<link rel="stylesheet" th:href="@{/style/style.css}">
	<script src="../static/js/script.js" th:src="@{/js/script.js}"></script>
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="container mt-5 chat-container">

    <h2 class="text-center neon-heading">Chat with GPT-Desk</h2>
	<p class="neon-subheading"><b>Note:</b> As this is a test environment, we recommend initiating a 'New Conversation' before exiting the web app to ensure that all previous messages are cleared.</p>
	<div class="lp-cta">
		<a th:href="@{ / }" class="btn neon-btn mt-5 m-3">Home</a>
	  	<a th:href="@{/reset}" class="btn neon-btn mt-5 m-3">New Conversation</a>
	</div>

    <div>
        <h3 class="neon-subheading">Chat:</h3>
        <div th:if="${chatHistory != null}" class="chat-box">
            <ul class="list-group">
                <li class="list-group-item chat-entry" th:each="entry : ${chatHistory}">
                    <strong class="user-label">You:</strong> <span th:text="${entry.question}"></span><br>
                    <strong class="gpt-label">GPT:</strong> <span th:text="${entry.answer}"></span>
                </li>
            </ul>
        </div>
    </div>
	<hr class="neon-hr">
	<form th:action="@{/ask}" method="post" th:if="${!limitReached}" class="chat-form">
	    <div class="mb-3">
	        <label for="question" class="form-label neon-label">Enter your prompt:</label>
	        <input type="text" id="question" name="question" class="form-control neon-input" autocomplete="off" required>
	    </div>
	    <button type="submit" class="btn neon-btn m-3">Ask</button>
	</form>

	<div th:if="${limitReached}" class="alert alert-warning neon-alert">
	    <strong>Limit reached!</strong> You have reached the maximum number of questions for this session.
	    <a th:href="@{/reset}" class="btn c-#880d63">New Conversation</a>
	</div>

    <footer class="mt-5 text-center neon-footer">
        <p>Powered by <a href="https://openai.com" target="_blank">OpenAI</a></p>
        <p>Note: This model can make mistakes. Be mindful of important info.</p>
    </footer>
</body>

</html>
